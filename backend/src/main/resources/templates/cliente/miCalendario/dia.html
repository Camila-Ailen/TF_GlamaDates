
<head>
  <link rel="stylesheet" type="text/css" href="/css/detalles.css">
</head>

<div class="bg-pink-50 min-h-screen flex items-center justify-center">
  <div class="w-full max-w-2xl p-6 bg-white rounded-lg shadow-lg">
    <header class="text-center mb-6">
      <h1 class="text-3xl font-bold text-pink-600">Detalles del Día</h1>
      <p class="text-pink-400">Información para el día seleccionado</p>
    </header>
    <div class="text-center">
      <p class="text-xl text-pink-600">Fecha: <span th:text="${day} + '-' + ${month} + '-' + ${year}"></span></p>
    </div>

    <!-- Formulario para seleccionar categoría, horario, paquete, etc. -->
    <form id="seleccionForm" class="mt-6" th:action="@{/calendario/{year}-{month}-{day}(year=${year}, month=${month}, day=${day})}" method="get">
      <input type="hidden" name="year" th:value="${year}">
      <input type="hidden" name="month" th:value="${month}">
      <input type="hidden" name="day" th:value="${day}">

      <div class="flex">
        <!-- Parte izquierda, combos -->
        <div class="w-1/2 pr-4">
          <!-- Categoría de turno -->
          <div class="mb-4">
            <label for="categoria" class="block text-pink-600">Categoría de Turno</label>
            <select id="categoria" name="categoriaId" class="w-full p-2 border rounded" required onchange="this.form.submit()">
              <option value="">Seleccione una categoría</option>
              <option th:each="categoria : ${categoriasPadre}"
                      th:value="${categoria.id}"
                      th:text="${categoria.nombre}"
                      th:selected="${categoria.id} == ${categoriaId}">
              </option>
            </select>
          </div>
          <p>Categoria seleccionada: <span th:text="${categoriaId}"></span></p>

          <!-- Horarios -->
          <div class="mb-4" th:if="${horariosDisponibles}">
            <label for="horario" class="block text-pink-600">Horarios Disponibles</label>
            <select id="horario" name="horarioId" class="w-full p-2 border rounded" required onchange="this.form.submit()">
              <option value="">Seleccione un horario</option>
              <option th:each="horario : ${horariosDisponibles}"
                      th:value="${horario.id}" th:text="${horario.horaInicio}"
                      th:selected="${horario.id} == ${horarioId}"></option>
            </select>
          </div>
          <p>Horario seleccionado: <span th:text="${horarioId}"></span></p>

          <!-- Profesionales -->
          <div class="mb-4" th:if="${profesionalesDisponibles}">
            <label for="profesional" class="block text-pink-600">Profesional</label>
            <select id="profesional" name="profesionalId" class="w-full p-2 border rounded">
              <option value="">Seleccione un profesional (opcional)</option>
              <option th:each="profesional : ${profesionalesDisponibles}" th:value="${profesional.id}" th:text="${profesional.nombre} + ' ' + ${profesional.apellido}"
                      th:selected="${profesional.id} == ${profesionalId}"></option>
            </select>
          </div>
        </div>

        <!-- Parte derecha, paquetes -->
        <div class="w-1/2 pl-4" th:if="${paquetesDisponibles}">
          <label class="block text-pink-600">Paquetes Disponibles</label>
          <div id="paquetes" class="space-y-4">
            <div th:each="paquete : ${paquetesDisponibles}" class="p-4 border rounded-lg cursor-pointer hover:bg-pink-100"
                 th:classappend="${paquete.id} == ${paqueteId} ? 'selected-package' : '' ">
              <input type="radio" name="paqueteId" th:value="${paquete.id}" th:checked="${paquete.id} == ${paqueteId}" class="hidden">
              <p class="text-pink-600 font-bold" th:text="${paquete.nombre}"></p>
              <p class="text-pink-400" th:text="${paquete.descripcion}"></p>
              <a th:href="@{/paquete/detalles/{id}(id=${paquete.id}, year=${year}, month=${month}, day=${day}, categoriaId=${categoriaId}, horarioId=${horarioId})}" class="text-pink-600 underline">Ver Detalle</a>
              <br>
              <a th:href="@{/calendario/{year}-{month}-{day}(year=${year}, month=${month}, day=${day}, categoriaId=${categoriaId}, horarioId=${horarioId}, paqueteId=${paquete.id})}" class="text-pink-600 underline">Seleccionar Paquete</a>
            </div>
          </div>
        </div>
      </div>
    </form>

    <!-- Formulario para sacar turno -->
    <form id="turnoForm" class="mt-6" th:action="@{/calendario/sacarTurno}" method="post">
      <input type="hidden" name="year" th:value="${year}">
      <input type="hidden" name="month" th:value="${month}">
      <input type="hidden" name="day" th:value="${day}">
      <input type="hidden" name="hora" th:value="${hora}">
      <input type="hidden" name="categoriaId" th:value="${categoriaId}">
      <input type="hidden" name="horarioId" th:value="${horarioId}">
      <input type="hidden" name="paqueteId" th:value="${paqueteId}">
      <input type="hidden" name="profesionalId" th:value="${profesionalId}">

      <button type="submit" class="w-full p-2 bg-pink-600 text-white rounded">Sacar Turno</button>
    </form>
  </div>
</div>
