<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Calendario Dinámico</title>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-pink-50 min-h-screen flex items-center justify-center">

<!-- Contenedor principal -->
<div class="flex flex-col lg:flex-row w-full max-w-6xl p-6 bg-white rounded-lg shadow-lg">
    <!-- Contenedor del calendario -->
    <div class="w-full lg:w-3/4">
        <header class="text-center mb-6">
            <h1 class="text-3xl font-bold text-pink-600">Mi Calendario</h1>
            <p class="text-pink-400">Organiza tus horarios</p>
        </header>

        <!-- Controles del calendario (mes, año) -->
        <div class="flex items-center justify-between mb-4">
            <button id="prevMonth" class="text-pink-500 hover:text-pink-700">&#8592; Anterior</button>
            <div id="currentMonth" class="text-pink-600 font-semibold">Noviembre 2024</div>
            <button id="nextMonth" class="text-pink-500 hover:text-pink-700">Siguiente &#8594;</button>
        </div>

        <!-- Encabezado de los días de la semana -->
        <div class="grid grid-cols-7 gap-2 text-center text-pink-600 font-semibold">
            <div>Lunes</div>
            <div>Martes</div>
            <div>Miércoles</div>
            <div>Jueves</div>
            <div>Viernes</div>
            <div>Sábado</div>
            <div>Domingo</div>
        </div>

        <!-- Contenedor de los días del mes -->
        <div id="calendarDays" class="grid grid-cols-7 gap-2 text-center mt-2">
            <!-- Aquí se generarán los días dinámicamente -->
        </div>
    </div>

    <!-- Contenedor de los turnos activos -->
    <div class="w-full lg:w-1/4 lg:ml-6 mt-6 lg:mt-0">
        <header class="text-center mb-6">
            <h2 class="text-2xl font-bold text-pink-600">Turnos Activos</h2>
        </header>
        <div id="activeShifts" class="space-y-4">
            <!-- Aquí se generarán los turnos dinámicamente -->
            <div class="p-4 bg-pink-100 rounded-lg shadow">
                <p class="text-pink-600">Turno 1</p>
                <p class="text-pink-400">Detalles del turno 1</p>
            </div>
            <div class="p-4 bg-pink-100 rounded-lg shadow">
                <p class="text-pink-600">Turno 2</p>
                <p class="text-pink-400">Detalles del turno 2</p>
            </div>
            <!-- Agrega más turnos según sea necesario -->
        </div>
    </div>
</div>


<script>
    // Configuración inicial del calendario
    const calendarDays = document.getElementById("calendarDays");
    const currentMonthDisplay = document.getElementById("currentMonth");

    // Meses y días para facilitar la visualización
    const months = ["Enero", "Febrero", "Marzo", "Abril", "Mayo", "Junio", "Julio", "Agosto", "Septiembre", "Octubre", "Noviembre", "Diciembre"];
    let date = new Date();

    function renderCalendar() {
        calendarDays.innerHTML = ""; // Limpiar días anteriores

        const year = date.getFullYear();
        const month = date.getMonth();
        const today = new Date();
        today.setHours(0, 0, 0, 0); // Establecer la hora a 00:00:00 para comparar solo la fecha

        // Mostrar el mes y año actual
        currentMonthDisplay.textContent = `${months[month]} ${year}`;

        // Calcular los días
        const firstDay = new Date(year, month, 1).getDay(); // Día de la semana del primer día del mes
        const lastDate = new Date(year, month + 1, 0).getDate(); // Último día del mes

        // Rellenar d��as en blanco
        const blanks = firstDay === 0 ? 6 : firstDay - 1; // Ajuste para que el lunes sea el primer día
        for (let i = 0; i < blanks; i++) {
            const blankDiv = document.createElement("div");
            calendarDays.appendChild(blankDiv);
        }

        // Generar días del mes
        for (let day = 1; day <= lastDate; day++) {
            const dayDiv = document.createElement("div");
            dayDiv.textContent = day;
            dayDiv.className = "p-2 rounded-lg hover:bg-pink-100 cursor-pointer";
            if (year === today.getFullYear() && month === today.getMonth() && day === today.getDate()) {
                dayDiv.classList.add("bg-pink-500", "text-white");
            }
            dayDiv.addEventListener("click", () => {
                const selectedDay = new Date(year, month, day);
                if (selectedDay < today) {
                    alert("No puedes seleccionar un día pasado");
                } else {
                    window.location.href = `/calendario/${year}-${month + 1}-${day}`;
                }
            });
            calendarDays.appendChild(dayDiv);
        }
    }

    // Navegación de meses
    document.getElementById("prevMonth").addEventListener("click", () => {
        date.setMonth(date.getMonth() - 1);
        renderCalendar();
    });

    document.getElementById("nextMonth").addEventListener("click", () => {
        date.setMonth(date.getMonth() + 1);
        renderCalendar();
    });

    // Inicializar calendario
    renderCalendar();
</script>
</body>
</html>
